class EventBus{constructor(){this.listeners=new Map}on(s,e){this.listeners.has(s)||this.listeners.set(s,[]),this.listeners.get(s).push(e)}off(s,e){if(s)if(e){const t=this.listeners.get(s);if(!t)return;const i=t.findIndex((s=>s===e));i>=0&&t.splice(i,1)}else this.listeners.delete(s)}emit(s,...e){for(const t of this.listeners.get(s)??[])t&&t(...e)}clear(){this.listeners.clear()}once(s,e){const onceCb=(...t)=>{this.off(s,onceCb),e(...t)};this.on(s,onceCb)}count(s){return(this.listeners.get(s)??[]).length}}export{EventBus as E};
