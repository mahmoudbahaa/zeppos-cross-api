import{h as e,l as s,a as t}from"./fileTransfer-plugin-BLOS6XUC.js";import{M as o,w as r}from"./messageWrapper-B1HEb_z0.js";import"./app.js";import{b as i}from"./ble-BpB2jqBv.js";import"./utils.js";import{getPackageInfo as a}from"@zos/app";import{log as n}from"@zos/utils";import"./file-transfer-D2Gn5YRm.js";import"./bleTransferFile.js";import"@zos/ble/TransferFile";import"./data.js";import"@zos/ble";const p=20,l=0;const g=[s(),function appPlugin(s){const t=function createDeviceMessage(){const e=new o({appId:a().appId,appDevicePort:p,appSidePort:l,ble:i,logger:n.getLogger("device-message")});return r(e,n.getLogger("message-builder-device"))}();return{onCreate(){this.messaging=this.globalData.messaging=t,this._onCall=this.onCall?.bind(this),this._onRequest=this.onRequest?.bind(this),this.messaging.onCall(this._onCall).onRequest(this._onRequest).connect()},onDestroy(){this.messaging.offOnCall().offOnRequest().disConnect()},request(e,s={}){return this.messaging.request(e,s)},call(e){return this.messaging.call(e)},httpRequest:e}}(),t()];function BaseApp(e){const s={};return g.forEach((e=>Object.assign(s,e))),{...e,...s,onCreate(...s){g.forEach((e=>e.onCreate?.apply(this,s))),e.onCreate?.apply(this,s)},onDestroy(...s){e.onDestroy?.apply(this,s),g.reverse().forEach((e=>e.onDestroy?.apply(this,s)))}}}export{BaseApp};
